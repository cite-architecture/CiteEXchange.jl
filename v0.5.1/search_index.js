var documenterSearchIndex = {"docs":
[{"location":"apis/#API-documentation","page":"API documentation","title":"API documentation","text":"","category":"section"},{"location":"apis/","page":"API documentation","title":"API documentation","text":"CurrentModule = CiteEXchange","category":"page"},{"location":"apis/#Exported-functions-and-types","page":"API documentation","title":"Exported functions and types","text":"","category":"section"},{"location":"apis/","page":"API documentation","title":"API documentation","text":"Block\ncexversion\nblocks\nblocktypes\nblocksfortype\ndatafortype\nrelationsets","category":"page"},{"location":"apis/#CiteEXchange.Block","page":"API documentation","title":"CiteEXchange.Block","text":"A single block of CEX data.\n\n\n\n\n\n","category":"type"},{"location":"apis/#CiteEXchange.cexversion","page":"API documentation","title":"CiteEXchange.cexversion","text":"Find CEX version for a block group.\n\ncexversion(group)\n\n\nReturn nothing if no version specified.\n\n\n\n\n\n","category":"function"},{"location":"apis/#CiteEXchange.blocks","page":"API documentation","title":"CiteEXchange.blocks","text":"Parse a string into an Array of Blocks.\n\nblocks(s)\n\n\n\n\n\n\n","category":"function"},{"location":"apis/#CiteEXchange.blocktypes","page":"API documentation","title":"CiteEXchange.blocktypes","text":"Find list of unique block types in a group.\n\nblocktypes(blockgroup)\n\n\n\n\n\n\n","category":"function"},{"location":"apis/#CiteEXchange.blocksfortype","page":"API documentation","title":"CiteEXchange.blocksfortype","text":"Find blocks of a given type in a blockgroup.\n\nblocksfortype(blocktype, blockgroup)\n\n\n\n\n\n\n","category":"function"},{"location":"apis/#CiteEXchange.datafortype","page":"API documentation","title":"CiteEXchange.datafortype","text":"Find data lines for all blocks of a given type in a blockgroup.\n\ndatafortype(blocktype, blockgroup)\n\n\n\n\n\n\n","category":"function"},{"location":"apis/#CiteEXchange.relationsets","page":"API documentation","title":"CiteEXchange.relationsets","text":"Gather a (possibly empty) list of Cite2Urns identifying all relation sets in a list of Blocks.\n\nrelationsets(blocklist; delimiter)\n\n\nIf strict is true, all relations sets appearing in relationsets blocks must appear in a datamodel entry.\n\n\n\n\n\n","category":"function"},{"location":"apis/#Internals","page":"API documentation","title":"Internals","text":"","category":"section"},{"location":"apis/","page":"API documentation","title":"API documentation","text":"blocktype","category":"page"},{"location":"apis/#CiteEXchange.blocktype","page":"API documentation","title":"CiteEXchange.blocktype","text":"Determine block type from first line of a CEX block.\n\nblocktype(s)\n\n\n\n\n\n\n","category":"function"},{"location":"texts/","page":"Custom text corpus","title":"Custom text corpus","text":"# Change these to read from files in test/assets.\n\ntextcex = \"\"\"#!ctsdata\nurn:cts:citedemo:gburg.bancroft.v2:1|Four score and seven years ago our fathers brought forth, on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.\nurn:cts:citedemo:gburg.bancroft.v2:2|Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived, and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting-place for those who here gave their lives, that that nation might live. It is altogether fitting and proper that we should do this.\nurn:cts:citedemo:gburg.bancroft.v2:3|But, in a larger sense, we can not dedicate, we can not consecrate we can not hallow this ground. The brave men, living and dead, who struggled here, have consecrated it far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced.\nurn:cts:citedemo:gburg.bancroft.v2:4|It is rather for us to be here dedicated to the great task remaining before us that from these honored dead we take increased devotion to that cause for which they here gave the last full measure of devotion - that we here highly resolve that these dead shall not have died in vain that this nation, under God, shall have a new birth of freedom, and that government of the people, by the people, for the people, shall not perish from the earth.\nurn:cts:citedemo:gburg.bliss.v2:1|Four score and seven years ago our fathers brought forth on this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.\nurn:cts:citedemo:gburg.bliss.v2:2|Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.\nurn:cts:citedemo:gburg.bliss.v2:3|But, in a larger sense, we can not dedicate -- we can not consecrate -- we can not hallow -- this ground. The brave men, living and dead, who struggled here, have consecrated it, far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here. It is for us the living, rather, to be dedicated here to the unfinished work which they who fought here have thus far so nobly advanced.\nurn:cts:citedemo:gburg.bliss.v2:4|It is rather for us to be here dedicated to the great task remaining before us -- that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion -- that we here highly resolve that these dead shall not have died in vain -- that this nation, under God, shall have a new birth of freedom -- and that government of the people, by the people, for the people, shall not perish from the earth.\nurn:cts:citedemo:gburg.everett.v2:1|Four score and seven years ago our fathers brought forth, upon this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.\nurn:cts:citedemo:gburg.everett.v2:2|Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived, and so dedicated, can long endure. We are met on a great battle-field of that war. We have come to dedicate a portion of that field, as a final resting-place for those who here gave their lives, that that nation might live. It is altogether fitting and proper that we should do this.\nurn:cts:citedemo:gburg.everett.v2:3|But, in a larger sense, we can not dedicate, we can not consecrate we can not hallow this ground. The brave men, living and dead, who struggled here, have consecrated it far above our poor power to add or detract. The world will little note, nor long remember what we say here, but it can never forget what they did here.\nurn:cts:citedemo:gburg.everett.v2:4|It is for us, the living, rather, to be dedicated here to the unfinished work which they who fought here, have, thus far, so nobly advanced. It is rather for us to be here dedicated to the great task remaining before us that from these honored dead we take increased devotion to that cause for which they here gave the last full measure of devotion that we here highly resolve that these dead shall not have died in vain that this nation, under God, shall have a new birth of freedom and that government of the people, by the people, for the people, shall not perish from the earth.\nurn:cts:citedemo:gburg.hay.v2:1|Four score and seven years ago our fathers brought forth, upon this continent, a new nation, conceived in Liberty, and dedicated to the proposition that all men are created equal.\nurn:cts:citedemo:gburg.hay.v2:2|Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived, and so dedicated, can long endure. We are met here on a great battlefield of that war. We have come to dedicate a portion of it, as a final resting place for those who here gave their lives that that nation might live. It is altogether fitting and proper that we should do this.\nurn:cts:citedemo:gburg.hay.v2:3|But in a larger sense, we can not dedicate we can not consecrate we can not hallow this ground. The brave men, living and dead, who struggled here, have consecrated it far above our poor power to add or detract. The world will little note, nor long remember, what we say here, but can never forget what they did here.\nurn:cts:citedemo:gburg.hay.v2:4|It is for us, the living, rather to be dedicated here to the unfinished work which they have, thus far, so nobly carried on. It is rather for us to be here dedicated to the great task remaining before us that from these honored dead we take increased devotion to that cause for which they gave the last full measure of devotion that we here highly resolve that these dead shall not have died in vain; that this nation shall have a new birth of freedom; and that this government of the people, by the people, for the people, shall not perish from the earth.\nurn:cts:citedemo:gburg.nicolay.v2:1|Four score and seven years ago our fathers brought forth, upon this continent, a new nation, conceived in liberty, and dedicated to the proposition that all men are created equal.\nurn:cts:citedemo:gburg.nicolay.v2:2|Now we are engaged in a great civil war, testing whether that nation, or any nation so conceived, and so dedicated, can long endure. We are met on a great battle field of that war. We come to dedicate a portion of it, as a final resting place for those who died here, that the nation might live. This we may, in all propriety do.\nurn:cts:citedemo:gburg.nicolay.v2:3|But, in a larger sense, we can not dedicate we can not consecrate we can not hallow, this ground The brave men, living and dead, who struggled here, have hallowed it, far above our poor power to add or detract. The world will little note, nor long remember what we say here; while it can never forget what they did here.\nurn:cts:citedemo:gburg.nicolay.v2:4|It is rather for us, the living, we here be dedicated to the great task remaining before us that, from these honored dead we take increased devotion to that cause for which they here, gave the last full measure of devotion that we here highly resolve these dead shall not have died in vain; that the nation, shall have a new birth of freedom, and that government of the people, by the people, for the people, shall not perish from the earth.\n\"\"\"","category":"page"},{"location":"texts/#Building-a-library-from-CEX-using-customized-text-corpora","page":"Custom text corpus","title":"Building a library from CEX using customized text corpora","text":"","category":"section"},{"location":"texts/","page":"Custom text corpus","title":"Custom text corpus","text":"In the following example, we've predefined a CEX string textcex.(ADD REFERENCE HERE TO FILES WHERE YOU CAN INSPECT THEM)","category":"page"},{"location":"texts/","page":"Custom text corpus","title":"Custom text corpus","text":"Required Julia packages:","category":"page"},{"location":"texts/","page":"Custom text corpus","title":"Custom text corpus","text":"using CiteEXchange\nusing CitableLibrary","category":"page"},{"location":"texts/#Define-the-custom-types","page":"Custom text corpus","title":"Define the custom types","text":"","category":"section"},{"location":"texts/","page":"Custom text corpus","title":"Custom text corpus","text":"using CitableText\nstruct MyText\n    u::CtsUrn\n    t::AbstractString\nend\nimport CitableBase: CitableTrait\nCitableTrait(::Type{MyText}) = CitableByCtsUrn()\n\nstruct MyCorpus\n    v::Vector{MyText}\nend\nimport CitableLibrary: CitableLibraryTrait\nCitableLibraryTrait(::Type{MyCorpus}) = CitableLibraryCollection()\n\n\nimport CitableBase: CexSerializable\nCexSerializable(::Type{MyCorpus}) = CexSerializable()\n\n\nimport CitableBase: fromcex\nfunction fromcex(s::AbstractString, MyCorpus; delimiter = \"|\")\n    srcblocks = blocksfortype(\"ctsdata\", blocks(s))\n    psgs = []\n    for b in srcblocks\n        for ln in  b.lines\n            parts = split(ln, delimiter)\n            push!(psgs, MyText(CtsUrn(parts[1]), parts[2]))\n        end\n    end\n    MyCorpus(psgs)\nend","category":"page"},{"location":"texts/#Build-from-CEX-source","page":"Custom text corpus","title":"Build from CEX source","text":"","category":"section"},{"location":"texts/","page":"Custom text corpus","title":"Custom text corpus","text":"banc = CtsUrn(\"urn:cts:citedemo:gburg.bancroft:\")\ntdict = Dict(banc => MyCorpus, \"ctsdata\" => MyCorpus)\nlib = library(textcex, tdict)","category":"page"},{"location":"library/#Instantiating-citable-content-from-CEX-source","page":"Instantiating content from CEX source","title":"Instantiating citable content from CEX source","text":"","category":"section"},{"location":"library/#Overview","page":"Instantiating content from CEX source","title":"Overview","text":"","category":"section"},{"location":"library/","page":"Instantiating content from CEX source","title":"Instantiating content from CEX source","text":"Objects of individual Julia types implementing the CitableBase package's CexSerializable trait can be constructed with the fromcex function.  The CiteEXchange package provides an additional library function that can construct an entire CiteLibrary from CEX source.  To do this, you need to include a Dict mapping the contents of your CEX content to Julia data types (each of which implements CexSerializable).  Keys to the Dict may be:","category":"page"},{"location":"library/","page":"Instantiating content from CEX source","title":"Instantiating content from CEX source","text":"a CEX block heading (e.g., ctsdata)\na CtsUrn for text copora\na Cite2Urn for cite collections\na Cite2Urn for relation sets\na Cite2Urn for data models","category":"page"},{"location":"library/","page":"Instantiating content from CEX source","title":"Instantiating content from CEX source","text":"You may intermix these freely. The library function will apply the most specific mapping in each case.  For example, you could use a CtsUrn to map one specific corpus to a particular Julia type (perhaps for language-specific processing, for example), and map the ctsdata block heading to handle all other text corpora.  ","category":"page"},{"location":"library/","page":"Instantiating content from CEX source","title":"Instantiating content from CEX source","text":"Note that all URNs are applied using urncontains, so you can map groups of collections, text corpora, relation sets or data models with a single URN.  ","category":"page"},{"location":"library/","page":"Instantiating content from CEX source","title":"Instantiating content from CEX source","text":"Required Julia packages:","category":"page"},{"location":"library/","page":"Instantiating content from CEX source","title":"Instantiating content from CEX source","text":"using CiteEXchange\nusing CitableLibrary","category":"page"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"collectioncex = \"\"\"#!datamodels\nCollection|Model|Label|Description\nurn:cite2:hmt:va_signs.v1:|urn:cite2:demo:datamodels.v1:annotationmodel|Annotation model|Model of critical sign annotating text\n\n#!citecollections\nURN|Description|Labelling property|Ordering property|License\nurn:cite2:hmt:va_signs.v1:|Occurrences of Aristarchan critical signs in the Veentus A manuscript|urn:cite2:hmt:va_signs.v1.label:|urn:cite2:hmt:va_signs.v1.sequence:|CC-attribution-share-alike\n\n#!citeproperties\nProperty|Label|Type|Authority list\nurn:cite2:hmt:va_signs.v1.urn:|URN|Cite2Urn|\nurn:cite2:hmt:va_signs.v1.label:|Name|String|\nurn:cite2:hmt:va_signs.v1.passage:|Iliad line|CtsUrn|\nurn:cite2:hmt:va_signs.v1.critsign:|Critical sign|Cite2Urn|\nurn:cite2:hmt:va_signs.v1.sequence:|Sequence|Number|\n\n#!citedata\nurn|label|passage|critsign|sequence\nurn:cite2:hmt:va_signs.v1:cs0|diple on Iliad 1.2|urn:cts:greekLit:tlg0012.tlg001.msA:1.2|urn:cite2:hmt:critsigns.v1:diple|0\n\"\"\"","category":"page"},{"location":"collections/#Building-a-library-from-CEX-using-customized-CITE-collections","page":"Custom CITE collection","title":"Building a library from CEX using customized CITE collections","text":"","category":"section"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"There are two ways to map a CITE collection to a Julia type:","category":"page"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"directly map a collection by its URN (possibly using URN containment)\nmap the datamodel defined for the collection in the source CEX data","category":"page"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"Use the required libraries:","category":"page"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"using CiteEXchange\nusing CitableLibrary","category":"page"},{"location":"collections/#Define-the-custom-types","page":"Custom CITE collection","title":"Define the custom types","text":"","category":"section"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"using CitableObject\n\nstruct TerribleTuples\n    urn::Cite2Urn\n    fieldproperties\n    data\nend\n\nimport CitableBase: CitableTrait\nCitableTrait(::Type{TerribleTuples}) = CitableByCite2Urn()\n\nimport CitableLibrary: CitableLibraryTrait\nCitableLibraryTrait(::Type{TerribleTuples}) = CitableLibraryCollection()\n\nimport CitableBase: CexSerializable\nCexSerializable(::Type{TerribleTuples}) = CexSerializable()\n\nfunction tuplematch(fields, u::Cite2Urn)\n    urncontains(u, Cite2Urn(fields[1]))\nend\n\nimport CitableBase: fromcex\nfunction fromcex(s::AbstractString, TerribleTuples; delimiter = \"|\")\n    allblocks =  blocks(s)\n    propertyblocks = blocksfortype(\"citeproperties\", allblocks)\n    collectionprops = []\n    for b in propertyblocks\n        for ln in b.lines[2:end]\n            push!(collectionprops, split(ln, delimiter))\n        end\n    end\n\n    datablocks = blocksfortype(\"citedata\", allblocks)\n    collectiondata = []\n    for b in datablocks\n        for ln in b.lines[2:end]\n            push!(collectiondata, split(ln, delimiter))\n        end\n    end\n    collectionurns = CiteEXchange.collections(allblocks, delimiter = delimiter, strict = false)\n\n\n    terrible  = []\n    for u in collectionurns\n        currprops = filter(p -> tuplematch(p,u), collectionprops)\n        currdata = filter(p -> tuplematch(p,u), collectiondata)\n        push!(terrible, TerribleTuples(u, currprops, currdata))\n    end\n    terrible\nend\n","category":"page"},{"location":"collections/#Build-from-CEX-source","page":"Custom CITE collection","title":"Build from CEX source","text":"","category":"section"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"Now we can build a library by mapping specific CITE collections to our new class. ","category":"page"},{"location":"collections/#Mapping-content-with-a-containing-URN","page":"Custom CITE collection","title":"Mapping content with a containing URN","text":"","category":"section"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"In this example, we map a collection-level URN to our type. ","category":"page"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"signcollection = Cite2Urn(\"urn:cite2:hmt:va_signs:\")\ntdict1 = Dict(signcollection => TerribleTuples)\nlib1 = library(collectioncex, tdict1, strict = false)","category":"page"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"Since the one collection in this sample is mapped to a data model, we can create a library with equivalent contents using the library as the key to the Julia type.","category":"page"},{"location":"collections/","page":"Custom CITE collection","title":"Custom CITE collection","text":"annotationmodel = Cite2Urn(\"urn:cite2:demo:datamodels.v1:annotationmodel\")\ntdict2 = Dict(annotationmodel => TerribleTuples)\nlib2 = library(collectioncex, tdict2)","category":"page"},{"location":"#CiteEXchange","page":"Overview","title":"CiteEXchange","text":"","category":"section"},{"location":"","page":"Overview","title":"Overview","text":"Parse strings and files in CEX format.","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"Cite EXchange format (CEX) is a plain-text format for serializing citable scholarly resources.","category":"page"},{"location":"#Quick-example","page":"Overview","title":"Quick example","text":"","category":"section"},{"location":"","page":"Overview","title":"Overview","text":"Plain-text CEX files are composed of one or more blocks defined by a  CEX header line.  ","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"Reading a CEX file creates an array of Blocks, each of which has a label identifying the block type, and a series of data lines. This example reads a file with ctscatalog and ctsdata blocks.","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"f = string(pwd() |> dirname, \"/data/burneyex.cex\")","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"using CiteEXchange\nblocklist = CiteEXchange.fromfile(f)\nblocklist |> length","category":"page"},{"location":"#Work-with-contents-of-an-individual-block","page":"Overview","title":"Work with contents of an individual block","text":"","category":"section"},{"location":"","page":"Overview","title":"Overview","text":"You can work directly the array of blocks:","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"blocklist[1].label","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"blocklist[1].lines","category":"page"},{"location":"#Work-with-an-array-of-Blocks","page":"Overview","title":"Work with an array of Blocks","text":"","category":"section"},{"location":"","page":"Overview","title":"Overview","text":"CiteEXchange also has functions that work with arrays of Blocks.  You can see what types of blocks are present.","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"blocktypes(blocklist)","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"You can find all data for a given type of block.","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"datafortype(\"ctscatalog\", blocklist)","category":"page"},{"location":"","page":"Overview","title":"Overview","text":"A typical work pattern might be to read an array of blocks, see what types of block are included, and then use an appropriate module to process blocks depending on their type (e.g., use the CitableCorpus module to read a ctsdata or ctscatalog block).","category":"page"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"# Change these to read from files in test/assets.\nrelationcex = \"\"\"#!datamodels\nCollection|Model|Label|Description\nurn:cite2:hmt:dse.v1:|urn:cite2:cite:datamodels.v1:dsemodel|Physical text model|Model of a text-bearing surface with documentary image data\n\n#!relationsetcatalog\nurn|urn:cite2:hmt:dse.v1:\nlabel|Collection of all DSE records for HMT project MSS\npsg|CtsUrn\nimg|Cite2Urn\nsurface|Cite2Urn\n\n#!citerelationset\nurn|urn:cite2:hmt:dse.v1:msBil8\nlabel|Collection of DSE records for Iliad 8 in the Venetus B\npassage|imageroi|surface\n// Here's a comment on 8.1.\nurn:cts:greekLit:tlg0012.tlg001.msB:8.1|urn:cite2:hmt:vbbifolio.v1:vb_102v_103r@0.4843,0.2961,0.2552,0.05667|urn:cite2:hmt:msB.v1:103r\n// Add a note on line 8.2!\nurn:cts:greekLit:tlg0012.tlg001.msB:8.2|urn:cite2:hmt:vbbifolio.v1:vb_102v_103r@0.4980,0.3358,0.2336,0.03061|urn:cite2:hmt:msB.v1:103r\n\n#!citerelationset\nurn|urn:cite2:hmt:dse.v1:burney86il8\nlabel|Collection of DSE records for Iliad 8 in British Library, Burney 86\ntext|image|surface\nurn:cts:greekLit:tlg0012.tlg001.burney86:8.title|urn:cite2:citebl:burney86imgs.v1:burney_ms_86_f073r@0.1703,0.3014,0.3983,0.03259|urn:cite2:hmt:burney86pages.v1:73r\nurn:cts:greekLit:tlg0012.tlg001.burney86:8.1|urn:cite2:citebl:burney86imgs.v1:burney_ms_86_f073r@0.1446,0.3405,0.4177,0.05148|urn:cite2:hmt:burney86pages.v1:73r\n\"\"\"","category":"page"},{"location":"relations/#Building-a-library-from-CEX-using-customized-relation-sets","page":"Custom relation set","title":"Building a library from CEX using customized relation sets","text":"","category":"section"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"Two options:","category":"page"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"map a datamodel\nmap a specific collection","category":"page"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"using CiteEXchange\nusing CitableLibrary","category":"page"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"In the following example, we've predefined a CEX string relationscex.(ADD REFERENCE HERE TO FILES WHERE YOU CAN INSPECT THEM)","category":"page"},{"location":"relations/#Create-a-custom-type-for-relation-sets","page":"Custom relation set","title":"Create a custom type for relation sets","text":"","category":"section"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"using CitableObject\nusing CitableText\nstruct MyDSE\n    psg::CtsUrn\n    img::Cite2Urn\n    surf::Cite2Urn\nend\nimport CitableBase: CitableTrait\nCitableTrait(::Type{MyDSE}) = CitableByCite2Urn()\n\nstruct MyDSESet\n    v::Vector{MyDSE}\nend\nimport CitableLibrary: CitableLibraryTrait\nCitableLibraryTrait(::Type{MyDSESet}) = CitableLibraryCollection()\n\nimport CitableBase: CexSerializable\nCexSerializable(::Type{MyDSESet}) = CexSerializable()\n\nimport CitableBase: fromcex\nfunction fromcex(s::AbstractString, MyDSESet; delimiter = \"|\")\n    srcblocks = blocksfortype(\"citerelationset\", blocks(s))\n    records = []\n    for b in srcblocks\n        #@warn(\"blocklines\",b.lines)   \n        for ln in  b.lines[4:end]\n            #@warn(\"fromcex for MyDSESet: line\", ln)\n            parts = split(ln, delimiter)\n            push!(records, MyDSE(CtsUrn(parts[1]), Cite2Urn(parts[2]), Cite2Urn(parts[3])))\n        end\n    end\n    MyDSESet(records)\nend","category":"page"},{"location":"relations/#Build-from-CEX-source","page":"Custom relation set","title":"Build from CEX source","text":"","category":"section"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"Now we can build a library by mapping specific DSE relation sets to our new class. Each of the following three examples instantiates","category":"page"},{"location":"relations/#Mapping-content-with-a-containing-URN","page":"Custom relation set","title":"Mapping content with a containing URN","text":"","category":"section"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"In this example, we map a collection-level URN to our class.  This will get both collections in our CEX, since they are both members of that collection.","category":"page"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"hmtdse = Cite2Urn(\"urn:cite2:hmt:dse.v1:\")\ntdict1 = Dict(hmtdse => MyDSESet)\nlib1 = library(relationcex, tdict1)","category":"page"},{"location":"relations/#Mapping-content-with-a-data-model","page":"Custom relation set","title":"Mapping content with a data model","text":"","category":"section"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"This time, we map a data model for DSE relation sets to our new class. This mapping will be applied to all relation sets that the source CEX defines as implementing the mapped models.","category":"page"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"modelurn = Cite2Urn(\"urn:cite2:cite:datamodels.v1:dsemodel\")\ntdict2 = Dict(modelurn => MyDSESet)\nlib2 = library(relationcex, tdict2)","category":"page"},{"location":"relations/#Mapping-content-with-a-mixed-dictionary","page":"Custom relation set","title":"Mapping content with a mixed dictionary","text":"","category":"section"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"vburn = Cite2Urn(\"urn:cite2:hmt:dse.v1:msBil8\")\ntdict3 = Dict(vburn => MyDSESet, modelurn => MyDSESet)\nlib3 = library(relationcex, tdict3)","category":"page"},{"location":"relations/#Including-only-some-relations","page":"Custom relation set","title":"Including only some relations","text":"","category":"section"},{"location":"relations/","page":"Custom relation set","title":"Custom relation set","text":"tdict4 = Dict(vburn => MyDSESet)\nlib4 = library(relationcex, tdict4)","category":"page"}]
}
